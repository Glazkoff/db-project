{% extends "base.html" %} {% block title %}Админпанель{% endblock %} {% block
content %}
<h1>Админпанель</h1>
<div>
  <p>
    В среднем в одном рецепте указано ингредиентов:
    {{dashboard_data['average_ingredients_count']}}
  </p>
</div>
<div class="d-flex align-items-start w-100">
  <div
    class="nav flex-column nav-pills me-3"
    id="v-pills-tab"
    role="tablist"
    aria-orientation="vertical"
  >
    <button
      class="nav-link active"
      id="v-pills-categories-tab"
      data-bs-toggle="pill"
      data-bs-target="#v-pills-categories"
      type="button"
      role="tab"
    >
      Категории
    </button>
    <button
      class="nav-link"
      id="v-pills-ingredients-tab"
      data-bs-toggle="pill"
      data-bs-target="#v-pills-ingredients"
      type="button"
      role="tab"
    >
      Ингредиенты
    </button>
    <button
      class="nav-link"
      id="v-pills-units-tab"
      data-bs-toggle="pill"
      data-bs-target="#v-pills-units"
      type="button"
      role="tab"
    >
      Единицы измерения
    </button>
  </div>
  <div class="tab-content" id="v-pills-tabContent">
    <div
      class="tab-pane fade show active"
      id="v-pills-categories"
      role="tabpanel"
      tabindex="0"
    >
      <div>
        <h3>Список категорий</h3>
      </div>
      <button
        type="button"
        class="btn btn-success"
        data-bs-toggle="modal"
        data-bs-target="#exampleModal"
      >
        Добавить категорию
      </button>
      <div class="modal fade" id="exampleModal" tabindex="-1">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h1 class="modal-title fs-5" id="exampleModalLabel">
                Создание категории
              </h1>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
              ></button>
            </div>
            <div class="modal-body">...</div>
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-secondary"
                data-bs-dismiss="modal"
              >
                Отмена
              </button>
              <button type="button" class="btn btn-success">Сохранить</button>
            </div>
          </div>
        </div>
      </div>
      <table class="table table-sm">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">Название категории</th>
            <th scope="col">ID родительской категории</th>
            <th scope="col">Действия</th>
          </tr>
        </thead>
        <tbody>
          {% for category in content_data['categories']%}
          <tr>
            <th scope="row">{{category.id}}</th>
            <td>{{category.category_name}}</td>
            {% if category.parent_category_id != None %}
            <td>{{category.parent_category_id}}</td>
            {% else %}
            <td>-</td>
            {% endif %}
            <td>
              <button type="button" class="btn btn-secondary btn-sm">
                Изменить
              </button>
              <button type="button" class="btn btn-danger btn-sm">
                Удалить
              </button>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    <div
      class="tab-pane fade"
      id="v-pills-ingredients"
      role="tabpanel"
      tabindex="0"
    >
      <h3>Список ингредиентов</h3>
      <button
        type="button"
        class="btn btn-success"
        data-bs-toggle="modal"
        data-bs-target="#ingredientModal"
      >
        Добавить ингредиент
      </button>
      <div class="modal fade" id="ingredientModal" tabindex="-1">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h1 class="modal-title fs-5" id="ingredientModalLabel">
                Создание ингредиента
              </h1>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"
              ></button>
            </div>
            <div class="modal-body">
              <form
                method="POST"
                action="/api/admin/ingredients"
                class="form-horizontal"
              >
                {{ ingredient_creation_form.csrf_token }}
                <div class="form-group">
                  {{
                  ingredient_creation_form.ingredient_name.label(class="col-sm-2
                  control-label") }}
                  <div class="col-sm-10">
                    {{
                    ingredient_creation_form.ingredient_name(class="form-control")
                    }}
                  </div>
                </div>
                <div class="form-group mt-2">
                  <div class="col-sm-offset-2 col-sm-10">
                    <button type="submit" class="btn btn-primary">
                      Создать ингредиент
                    </button>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
      <table class="table table-sm">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">Единица измерения</th>
            <th scope="col">Действия</th>
          </tr>
        </thead>
        <tbody>
          {% for ingredient in content_data['ingredients']%}
          <tr>
            <th scope="row">{{ingredient.id}}</th>
            <td>{{ingredient.ingredient_name}}</td>
            <td>
              <button type="button" class="btn btn-secondary btn-sm">
                Изменить
              </button>
              <button type="button" class="btn btn-danger btn-sm">
                Удалить
              </button>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    <div class="tab-pane fade" id="v-pills-units" role="tabpanel" tabindex="0">
      <h3>Список единиц измерения</h3>
      <button
        type="button"
        class="btn btn-success"
        data-bs-toggle="modal"
        data-bs-target="#unitModal"
      >
        Добавить единицу измерения
      </button>
      <div class="modal fade" id="unitModal" tabindex="-1">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h1 class="modal-title fs-5" id="unitModalLabel">
                Создание единицы измерения
              </h1>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"
              ></button>
            </div>
            <div class="modal-body">...</div>
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-secondary"
                data-bs-dismiss="modal"
              >
                Отмена
              </button>
              <button type="button" class="btn btn-success">Сохранить</button>
            </div>
          </div>
        </div>
      </div>
      <table class="table table-sm">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">Полное название</th>
            <th scope="col">Короткое название</th>
            <th scope="col">Действия</th>
          </tr>
        </thead>
        <tbody>
          {% for unit in content_data['units']%}
          <tr>
            <th scope="row">{{unit.id}}</th>
            <td>{{unit.full_name}}</td>
            <td>{{unit.short_name}}</td>
            <td>
              <button type="button" class="btn btn-secondary btn-sm">
                Изменить
              </button>
              <button type="button" class="btn btn-danger btn-sm">
                Удалить
              </button>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}
